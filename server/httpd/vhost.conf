<Virtualhost *:80>
  DocumentRoot "/var/www"
  ServerName mariss.geo-solutions.it
  DirectoryIndex index.html index.php
  ProxyRequests On
  ProxyPreserveHost On
  ProxyVia full

<Location />
        AuthName "authenticationform"
        AuthFormProvider ldap
        AuthBasicProvider ldap
        AuthLDAPURL ldap://84.33.2.24:389/dc=mariss,dc=egeos,dc=it?uid
        AuthType form
	      ErrorDocument 403 /html/redirectToHome.html
        ErrorDocument 404 /html/redirectToHome.html
        # Bootstrap login.
	      # ErrorDocument 401 /html/login/index.html
        # MapStore login.
        ErrorDocument 401 /html/redirectToLogin.html
	      AuthFormFakeBasicAuth On
        Session On
        SessionCookieName session path=/
        Require valid-user
</Location>

<Location /html>
        Require all granted
</Location>

<Location /logout>
        SetHandler form-logout-handler
        AuthFormLogoutLocation /mapstore/manager
</Location>

# Resources to use MapStore login
<Location /mapstore/externals>
        Require all granted
</Location>
<Location /mapstore/script>
        Require all granted
</Location>
<Location /mapstore/theme>
        Require all granted
</Location>
<Location /mapstore/loginpage>
        Require all granted
</Location>
<Location /mapstore/config>
        Require all granted
</Location>
<Location /mapstore/debug.js>
        Require all granted
</Location>

  <proxy>
    Order deny,allow
    Allow from all
  </proxy>

  # mapstore
  ProxyPass        /mapstore  http://localhost:9090/mapstore
  ProxyPassReverse /mapstore  http://localhost:9090/mapstore

  # opensdi2-manager
  ProxyPass        /opensdi2-manager  http://localhost:8080/opensdi2-manager
  ProxyPassReverse /opensdi2-manager  http://localhost:8080/opensdi2-manager

  # http-proxy
  ProxyPass        /http_proxy  http://localhost:9090/http_proxy
  ProxyPassReverse /http_proxy  http://localhost:9090/http_proxy

  # geostore
  ProxyPass        /geostore  http://localhost:9090/geostore
  ProxyPassReverse /geostore  http://localhost:9090/geostore

  # geoserver
  ProxyPass        /geoserver  http://localhost:10080/geoserver
  ProxyPassReverse /geoserver  http://localhost:10080/geoserver

</Virtualhost>